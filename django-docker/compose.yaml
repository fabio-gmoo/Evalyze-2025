services:
  web:
    build: .
    volumes:
      - .:/app
    ports:
      - '8000:8000'
    secrets:
      - source: jwt_key_private
        target: jwt_private.pem
      - source: jwt_key_public
        target: jwt_public.pem
    networks:
      - app_network

  interview:
    build:
      context: ./interview-svc
      dockerfile: Dockerfile
    ports:
      - '9000:9000'
    env_file:
      - ../django-docker/.env
    environment:
      DEMO_MODE: true
      DEMO_API_KEY: evalyze-demo-123
    networks:
      - app_network

secrets:
  jwt_key_private:
    file: ../secrets/jwtRS256.key
  jwt_key_public:
    file: ../secrets/jwtRS256.key.pub

networks:
  app_network:
    driver: bridge
