<form [formGroup]="form" (ngSubmit)="submit()" novalidate class="form-card">
  <!-- Cabecera -->
  <div class="form-header">
    <h2>Crear Cuenta</h2>
    <p>Ãšnete a la plataforma de reclutamiento inteligente</p>
  </div>

  <!-- Selector de tipo de cuenta -->
  <div class="segmented">
    <button
      type="button"
      [class.active]="accountType() === 'company'"
      (click)="setAccount('company')"
    >
      ğŸ¢ Empresa
    </button>
    <button
      type="button"
      [class.active]="accountType() === 'candidate'"
      (click)="setAccount('candidate')"
    >
      ğŸ‘¤ Candidato
    </button>
  </div>

  <div class="inputs-grid">
    <!-- CANDIDATO: Nombre Completo -->
    @if (accountType() === 'candidate') {
      <div class="field full-width">
        <label>Nombre Completo</label>
        <input type="text" formControlName="name" placeholder="Ej: Juan PÃ©rez" />
      </div>
    }

    <!-- EMPRESA: Nombre -->
    @if (accountType() === 'company') {
      <div class="field">
        <label>Nombre de la Empresa</label>
        <input type="text" formControlName="company" placeholder="Ej: Tech Solutions" />
      </div>
      
      <div class="field">
        <label>TamaÃ±o</label>
        <div class="select-wrapper">
          <select formControlName="size">
            <option value="" disabled selected>Seleccionar</option>
            <option>1-10</option>
            <option>11-50</option>
            <option>51-200</option>
            <option>201-1000</option>
            <option>1000+</option>
          </select>
        </div>
      </div>
    }

    <!-- Email (ComÃºn) -->
    <div class="field full-width">
      <label>Email Corporativo</label>
      <input type="email" formControlName="email" placeholder="nombre@empresa.com" />
    </div>

    <!-- Password -->
    <div class="field">
      <label>ContraseÃ±a</label>
      <div class="input-with-icon">
        <input
          [type]="showPw() ? 'text' : 'password'"
          formControlName="password"
          placeholder="Min. 6 caracteres"
        />
        <button type="button" class="eye-btn" (click)="togglePw()">
          {{ showPw() ? 'ğŸš«' : 'ğŸ‘' }}
        </button>
      </div>
    </div>

    <!-- Confirm -->
    <div class="field">
      <label>Confirmar</label>
      <div class="input-with-icon">
        <input
          [type]="showCf() ? 'text' : 'password'"
          formControlName="confirm"
          placeholder="Repetir contraseÃ±a"
        />
        <button type="button" class="eye-btn" (click)="toggleCf()">
          {{ showCf() ? 'ğŸš«' : 'ğŸ‘' }}
        </button>
      </div>
    </div>
  </div>

  <!-- TÃ©rminos -->
  <label class="tos">
    <input type="checkbox" formControlName="tos" />
    <span class="tos-text">
      Acepto los <a href="#">TÃ©rminos</a> y <a href="#">Privacidad</a>
    </span>
  </label>

  <!-- BotÃ³n Principal -->
  <button class="btn-submit" [disabled]="form.invalid || loading()">
    @if (loading()) { <span class="spinner"></span> }
    Crear Cuenta y Comenzar
  </button>

  <!-- NUEVO: Link Iniciar SesiÃ³n -->
  <div class="form-footer">
    <p>Â¿Ya tienes cuenta? <a routerLink="/auth">Iniciar SesiÃ³n</a></p>
  </div>
</form>