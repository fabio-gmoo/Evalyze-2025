<!-- src/app/widgets/vacancy-card/vacancy-card.html -->
<article class="vacancy-card">
  <div class="card-header">
    <div class="card-title-section">
      <h3 class="card-title">{{ vacancy.puesto }}</h3>
      <h4>{{ vacancy.company_name }}</h4>

      <div class="card-meta">
        @if (vacancy.ubicacion) {
          <span class="meta-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" />
              <circle cx="12" cy="10" r="3" />
            </svg>
            {{ vacancy.ubicacion }}
          </span>
        }

        @if (vacancy.tipo_contrato) {
          <span class="meta-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="2" y="7" width="20" height="14" rx="2" ry="2" />
              <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" />
            </svg>
            {{ vacancy.tipo_contrato }}
          </span>
        }

        @if (vacancy.departamento) {
          <span class="meta-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
              <circle cx="9" cy="7" r="4" />
              <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
              <path d="M16 3.13a4 4 0 0 1 0 7.75" />
            </svg>
            {{ vacancy.departamento }}
          </span>
        }
      </div>
    </div>
    @if (vacancy.activa) {
      <span class="status-badge"> Activa </span>
    } @else {
      <span class="status-badge inactive">Inactiva</span>
    }
  </div>

  @if (vacancy.descripcion) {
    <p class="card-description">
      {{ vacancy.descripcion }}
    </p>
  }

  <div class="card-footer">
    <div class="footer-info">
      @if (vacancy.salario) {
        <div class="salary">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="1" x2="12" y2="23" />
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
          </svg>
          {{ vacancy.salario }}
        </div>
      }

      @if (viewMode === 'company') {
        <div class="candidates-count">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
            <circle cx="9" cy="7" r="4" />
            <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
            <path d="M16 3.13a4 4 0 0 1 0 7.75" />
          </svg>
          <strong>{{ vacancy.applications_count || vacancy.candidatos || 0 }}</strong>
          {{
            (vacancy.applications_count || vacancy.candidatos || 0) === 1
              ? 'candidato'
              : 'candidatos'
          }}
        </div>
      }
    </div>

    <div class="card-actions">
      <!-- Details button (always visible) -->
      <button type="button" class="btn btn-secondary" (click)="onDetails()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10" />
          <line x1="12" y1="16" x2="12" y2="12" />
          <line x1="12" y1="8" x2="12.01" y2="8" />
        </svg>
        Detalles
      </button>

      @if (viewMode === 'company') {
        <button
          type="button"
          class="btn btn-secondary btn-icon"
          (click)="onEdit()"
          title="Editar vacante"
        >
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
          </svg>
        </button>

        <button
          type="button"
          class="btn btn-danger btn-icon"
          (click)="onDelete()"
          title="Eliminar vacante"
        >
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="3 6 5 6 21 6" />
            <path
              d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
            />
            <line x1="10" y1="11" x2="10" y2="17" />
            <line x1="14" y1="11" x2="14" y2="17" />
          </svg>
        </button>
      }

      @if (viewMode === 'candidate') {
        <button type="button" class="btn btn-primary" (click)="onApply()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
            <polyline points="22 4 12 14.01 9 11.01" />
          </svg>
          Postular
        </button>
      }
    </div>
  </div>
</article>
