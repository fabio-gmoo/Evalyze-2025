<!-- src/app/pages/vacantes/components/chat-drawer/chat-drawer.component.html -->
@if (open) {
  <div class="chat-overlay" (click)="onClose()"></div>
}

<aside class="chat-drawer" [class.open]="open">
  <div class="chat-header">
    <div class="chat-title">
      <strong>Entrevista IA</strong>
      @if (vacancy) {
        <div>â€” {{ vacancy.puesto }}</div>
      }
    </div>
    <button class="btn-close" (click)="onClose()" type="button">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
        <path
          d="M6 6l12 12M18 6L6 18"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
        />
      </svg>
    </button>
  </div>

  <div class="chat-body" #chatScroll>
    @for (m of messages; track trackByIndex($index)) {
      <div [ngClass]="m.from === 'user' ? 'bubble bubble-user' : 'bubble bubble-bot'">
        <div>{{ m.text }}</div>
        <div class="bubble-time">{{ m.time }}</div>
      </div>
    }
  </div>

  <form class="chat-input" (submit)="onSend($event)">
    <input
      class="form-input"
      placeholder="Escribe tu respuesta..."
      [ngModel]="draft"
      (ngModelChange)="onDraftChange($event)"
      name="chatDraft"
    />
    <button class="btn-primary" type="submit">Enviar</button>
  </form>
</aside>
